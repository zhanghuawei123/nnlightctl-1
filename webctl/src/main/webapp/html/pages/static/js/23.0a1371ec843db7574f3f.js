webpackJsonp([23],{TQ3E:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("woOf"),i=a.n(l),n=a("ods1"),s=(a("9GaH"),{name:"AreaAdmin",data:function(){return{activeName:"boxGIS",type:1,pageNumber:1,pageSize:10,multipleSelection:[],currentPage:1,allTotal:null,TITLE:null,List:[],addOrUpdateStatus:null,newObject:{},addDialog:!1,addNewObjectRules:{latitude:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],longitude:[{required:!0,message:"填写内容不得为空",trigger:"blur"}]}}},watch:{activeName:function(t,e){console.log(t),this.pageNumber=1,this.pageSize=10,this.type="boxGIS"===t?1:0,this.getList()}},methods:{tabHandleClick:function(t,e){console.log(t),this.activeName=t.name},handleSelectionChange:function(t){this.multipleSelection=t},handleCurrentChange:function(t){this.pageNumber=t,this.getList()},handleSizeChange:function(t){this.pageSize=t,this.getList()},getList:function(){var t=this,e=this;Object(n.r)(e.pageNumber,e.pageSize,e.type).then(function(a){e.List=a.data,e.List.length>0?t.allTotal=a.total:t.allTotal=0}).catch(function(t){console.log(t)})},addBlock:function(){this.TITLE="添加",this.addDialog=!0,this.addOrUpdateStatus="add"},deleteRow:function(t,e){var a=this,l=this,i=[];1===t?i.push(this.List[e].id):this.multipleSelection.length>0?this.multipleSelection.forEach(function(t){i.push(t.id)}):this.$message({message:"请勾选需要删除的数据",type:"warning"}),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.h)(i,l.type).then(function(t){a.$message({type:"success",message:"删除成功!"}),a.getList()}).catch(function(t){console.log(t)})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},editRow:function(t){this.TITLE="修改",this.addOrUpdateStatus="edit",this.newObject=i()({},this.List[t]),this.addDialog=!0},onSubmit:function(){var t=this;this.$refs.addEditForm.validate(function(e){if(e){var a=void 0;a="add"===t.addOrUpdateStatus?"添加成功":"修改成功",t.newObject.type=t.type,Object(n.d)(t.newObject).then(function(e){t.$message({type:"success",message:a}),t.getList(),t.addDialog=!1,t.handleCloseDialog()}).catch(function(t){console.log(t)})}else console.log("error submit!!")})},handleCloseDialog:function(t){this.newObject={},this.$refs.addEditForm.resetFields(),t()}},created:function(){this.getList()},destroyed:function(){}}),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"system-container"},[a("el-tabs",{on:{"tab-click":t.tabHandleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"控制柜GIS",name:"boxGIS"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"灯具GIS",name:"lightGIS"}})],1),t._v(" "),a("div",{staticClass:"system-top clearfix"},[a("div",{staticClass:"item-block f-l"},[a("span",{staticClass:"title"},[t._v("xxx")]),a("el-input",{attrs:{placeholder:"请输入内容"}})],1),t._v(" "),a("div",{staticClass:"item-block f-l"},[a("span",{staticClass:"title"},[t._v("xx")]),a("el-input",{attrs:{placeholder:"请输入内容"}})],1),t._v(" "),a("div",{staticClass:"btn-block f-r"},[a("el-button",{attrs:{type:"primary"}},[t._v("查询")])],1)]),t._v(" "),a("div",{staticClass:"system-center"},[a("div",{staticClass:"operation-bar"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addBlock()}}},[t._v("增加GIS")]),t._v(" "),a("el-button",{on:{click:function(e){t.deleteRow(2)}}},[t._v("删除")])],1),t._v(" "),a("div",{staticClass:"data-list"},[a("el-table",{ref:"lightTypeTable",staticStyle:{width:"100%"},attrs:{data:t.List,"tooltip-effect":"dark","header-row-class-name":"datalist-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"40"}}),t._v(" "),a("el-table-column",{attrs:{prop:"longitude",label:"经度",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"latitude",label:"纬度",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t._f("timeFormat")(e.row.gmtCreated))+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"修改时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t._f("timeFormat")(e.row.gmtUpdated))+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"mem",label:"GIS备注"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.editRow(e.$index)}}},[t._v("\n              编辑\n            ")]),t._v(" "),a("el-button",{staticClass:"danger-text-btn",attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.deleteRow(1,e.$index)}}},[t._v("\n              删除\n            ")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagelist-block"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.allTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.TITLE+"GIS",visible:t.addDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,center:"","before-close":t.handleCloseDialog},on:{"update:visible":function(e){t.addDialog=e}}},[a("el-form",{ref:"addEditForm",attrs:{model:t.newObject,rules:t.addNewObjectRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经度",required:"",prop:"longitude"}},[a("el-input",{staticClass:"width350",model:{value:t.newObject.longitude,callback:function(e){t.$set(t.newObject,"longitude",e)},expression:"newObject.longitude"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"纬度",required:"",prop:"latitude"}},[a("el-input",{staticClass:"width350",model:{value:t.newObject.latitude,callback:function(e){t.$set(t.newObject,"latitude",e)},expression:"newObject.latitude"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:t.newObject.mem,callback:function(e){t.$set(t.newObject,"mem",e)},expression:"newObject.mem"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,o,!1,function(t){a("pFtO"),a("sT2F")},"data-v-10499730",null);e.default=c.exports},pFtO:function(t,e){},sT2F:function(t,e){}});
//# sourceMappingURL=23.0a1371ec843db7574f3f.js.map