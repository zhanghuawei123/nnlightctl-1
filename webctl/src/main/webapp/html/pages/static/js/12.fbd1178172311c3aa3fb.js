webpackJsonp([12],{K6MT:function(e,t){},lTMi:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l("woOf"),o=l.n(i),a=l("mtWM"),s=l.n(a),n=l("mw3O"),r=l.n(n),c=l("ods1"),d=l("7Zju"),p=l("ZgHW"),u=(l("9GaH"),{name:"Deploy",data:function(){return{filterText:"",listEleboxModel22:[],selectEleboxModelId2:"",selectModelLoopId3:"",lightisUseVisible:!1,openAlarmVisible:!1,lightOpenVisible:!1,options:[],alermConfigData:{alarmLevel:!0,isNoticeMap:!1,isNoticeSms:!0,isWechat:!0,isEmail:!1},alarmLevelOptions:[{value:"严重（等级一）",label:"等级一"},{value:"严重（等级一）",label:"等级一"},{value:"严重（等级一）",label:"等级一"}],openalarmdData:[{ctype:"意外亮灯",alarmSource:"2222",isUse:!0},{ctype:"意外灭灯",alarmSource:"2222",isUse:!0},{ctype:"线路过流",alarmSource:"2222",isUse:!0},{ctype:"线路过压",alarmSource:"2222",isUse:!0},{ctype:"线路欠压",alarmSource:"2222",isUse:!0},{ctype:"配电柜断电",alarmSource:"2222",isUse:!0},{ctype:"配电柜缺相",alarmSource:"2222",isUse:!0},{ctype:"配电柜漏电",alarmSource:"2222",isUse:!0},{ctype:"功率因数越线",alarmSource:"2222",isUse:!0},{ctype:"柜门开启",alarmSource:"2222",isUse:!0},{ctype:"配电柜倾斜",alarmSource:"2222",isUse:!0},{ctype:"配电柜进水",alarmSource:"2222",isUse:!0},{ctype:"配电柜雷击",alarmSource:"2222",isUse:!0},{ctype:"手自控切换",alarmSource:"2222",isUse:!0},{ctype:"外部控制器",alarmSource:"2222",isUse:!0},{ctype:"自定义警报",alarmSource:"2222",isUse:!0}],value:"",data2:[{id:1,label:"杭州",children:[{id:4,label:"ABCDG区域"},{id:4,label:"文一西路"},{id:4,label:"西湖"},{id:4,label:"余杭"}]}],defaultProps:{children:"children",label:"label"},activeName:"cabinet",cabinetList:[{}],newCabinet:{},cabinetDialog:!1,deviceAddDialog:!1,addLoopDialog:!1,showAeraDialog:!1,showModelDialog:!1,setLightBoxDialog:!1,showMapDialog:!1,showUserableDialog:!1,addLampDialog:!1,addMoreLampDialog:!1,editCabinetDialog:!1,manageLanmpDialog:!1,insertLanmpDialog:!1,userable:"1",editIndex:null,gisAllList:[],listLightModel:[],listArea:[],eleboxList:[],eleboxList2:[],allEleboxList:[],allProjectList:[],newElebox:[],boxPageNumber:1,boxPageSize:10,boxMultipleSelection:[],boxCurrentPage:1,allEleboxTotal:0,ElboxCount:null,deviceList:[],EleboxModelCount:null,disabled:!1,newEleboxModel:{},nobeID:"1",nobeIDlist:[],addNewEleboxModel:{modelName:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],uid:[{required:!0,message:"选择内容不得为空",trigger:"blur"}],electricRating:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],powerRating:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],voltageRating:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],airSwitchType:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],contactorType:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],loopCount:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],ac:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],loopElectricity:[{required:!0,message:"填写内容不得为空",trigger:"blur"}]},originalLightIds:[],lightIdListIDss:[],modelLoopList:[],newModelLoop:{},lightingList:[],lightPageNumber:1,lightPageSize:10,lightMultipleSelection:[],lightCurrentPage:1,allLightTotal:0,newLight:{},newMoreLight:{},eleboxId:null,notBe:1,editNewEleboxRules:{uid:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],codeNumber:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],manufacture:[{required:!0,message:"请选择日期",trigger:"change"}],longitude:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],latitude:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],useDate:[{required:!0,message:"请选择日期",trigger:"change"}],ratedVoltage:[{required:!0,message:"选择内容不得为空",trigger:"change"}],ratedElectricty:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],powerRating:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],maxUseTime:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],spd:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],mainSwitch:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],nnlightctlEleboxGisId:[{required:!0,message:"选择内容不得为空",trigger:"blur"}],nnlightctlRegionId:[{required:!0,message:"选择内容不得为空",trigger:"blur"}],nnlightctlProjectId:[{required:!0,message:"选择内容不得为空",trigger:"blur"}]},idiid:[],addNewLightRules:{uid:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],manufacture:[{required:!0,message:"请选择日期",trigger:"change"}],useDate:[{required:!0,message:"请选择日期",trigger:"change"}],lamppost:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],lamphead:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],nnlightctlLightingModelId:[{required:!0,message:"选择内容不得为空",trigger:"change"}],nnlightctlLightingGisId:[{required:!0,message:"选择内容不得为空",trigger:"blur"}],propertySerialNumber:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],nnlightctlProjectId:[{required:!0,message:"选择内容不得为空",trigger:"blur"}],maxUseTime:[{required:!0,message:"填写内容不得为空",trigger:"blur"}]},addNewModelLoopRules:{loopCode:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],voltage:[{required:!0,message:"选择内容不得为空",trigger:"blur"}],electricity:[{required:!0,message:"填写内容不得为空",trigger:"blur"}],lightCount:[{required:!0,message:"填写内容不得为空",trigger:"blur"}]},selectEleboxId:"",eleboxIdBeifen:null,lightPageNumberBeifen:null,lightPageSizeBeifen:null,loopSplitDialog:!1,addSplitLoopDialog:!1,listEleboxModel:[],listModelLoop:[],listModelLoop2:[],selectEleboxModelId:null,selectModelLoopId:null,splitNewLoopList:[],thisLoopList1:[],panduan:1,MoreLampObj:{uid:null,uidNum:1,num:1},useIdAfterTime:null,thisLoopList:[],addTypeText:["增加","编辑"],addType:0,thisLoopListSelection:[]}},watch:{filterText:function(e){this.$refs.tree2.filter(e)},activeName:function(e,t){this.lightMultipleSelection=[],this.lightPageNumber=1,this.lightPageSize=10,this.eleboxId=null,this.notBe=1,"lighting"===e&&this.getListLighting()},insertLanmpDialog:function(e,t){!0===e?(this.eleboxIdBeifen=this.eleboxId,this.lightPageNumberBeifen=this.lightPageNumber,this.lightPageSizeBeifen=this.lightPageSize,this.lightPageNumber=null,this.lightPageSize=null,this.eleboxId=null,this.notBe=1,this.getListLighting(),this.getListEleboxModel(this.eleboxIdBeifen)):(this.selectModelLoopId=null,this.selectEleboxModelId=null,this.lightPageNumber=this.lightPageNumberBeifen,this.lightPageSize=this.lightPageSizeBeifen,this.eleboxId=this.eleboxIdBeifen,this.notBe=0,this.getListLighting(),this.eleboxIdBeifen=null,this.lightPageNumberBeifen=null,this.lightPageSizeBeifen=null)},selectEleboxModelId:function(e,t){e&&(this.selectModelLoopId=null,this.getListModelLoop(e))},selectModelLoopId:function(e,t){e&&this.getLoopLight(e)}},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleOpenAlarmChange:function(e){e.$index;console.log(this.openalarmdData),console.log(e,e.$index)},handleOpenAlarmOk:function(){var e=this;this.openAlarmVisible=!1,console.log(this.openalarmdData,"提交数据");var t=this.openalarmdData.map(function(e,t){e.ctype,e.alarmSource,Number(e.isUse)});Object(p.b)(t).then(function(t){t.data&&e.$message({showClose:!0,message:t})}),console.log(t,"處理之後數據")},handleOpenAlara:function(){console.log("是否开始警报"),this.openAlarmVisible=!0},handleLightOpen:function(){console.log("意外亮灯"),Object(p.c)().then(function(e){console.log(e,"请求的初始化配置数据")}),this.lightOpenVisible=!0},handleAlarmConfigSave:function(){this.lightOpenVisible=!1},tabHandleClick:function(e,t){console.log(e,t)},handleSelectionChangeBox:function(e){this.boxMultipleSelection=e},handleSelectionChangeLight:function(e){this.lightMultipleSelection=e},handleSelectionThisLoopList:function(e){console.log(e),this.thisLoopListSelection=e},handleSizeChangeBox:function(e){this.boxPageSize=e,this.getListElebox()},handleCurrentChangeBox:function(e){this.boxPageNumber=e,this.getListElebox()},handleSizeChangeLight:function(e){this.lightPageSize=e,this.getListLighting()},handleCurrentChangeLight:function(e){this.lightPageNumber=e,this.getListLighting()},addCabinet:function(){this.cabinetDialog=!0},deleteRow:function(){},editRow:function(){},onSubmit:function(){},handleCloseDialog:function(e){this.newUser={},e()},handleElboxEdit:function(e){var t=[];if(!(this.boxMultipleSelection.length>0))return this.$message({message:"请勾选需要处理的数据",type:"warning"}),!1;switch(this.boxMultipleSelection.forEach(function(e){t.push(e.id)}),e){case"1":this.showAeraDialog=!0;break;case"2":this.showModelDialog=!0;break;case"3":this.showMapDialog=!0;break;case"4":this.showUserableDialog=!0}},handleLightEdit:function(e){var t=[];if(!(this.lightMultipleSelection.length>0))return this.$message({message:"请勾选需要处理的数据",type:"warning"}),!1;switch(this.lightMultipleSelection.forEach(function(e){t.push(e.id)}),e){case"1":this.showAeraDialog=!0;break;case"2":this.setLightBoxDialog=!0;break;case"3":this.showMapDialog=!0;break;case"4":this.showUserableDialog=!0}},addDevice:function(){this.deviceAddDialog=!0},addLoop:function(){this.addLoopDialog=!0},loopSplitFun:function(e){console.log(e),this.getListEleboxModel(e),this.loopSplitDialog=!0},addLamp:function(){this.addType=0,this.addLampDialog=!0},addLampAll:function(){this.addMoreLampDialog=!0},editCabinet:function(e){this.newElebox=o()({},this.eleboxList[e]),console.log(this.allProjectList,"所有项目信息"),this.editCabinetDialog=!0},insertLamp:function(){this.insertLanmpDialog=!0;var e=this;Object(c.t)(e.nobeID).then(function(t){e.nobeIDlist=t.data,console.log("控制柜信息2",t.data)}).catch(function(e){console.log(e)}),Object(c.q)(e.nobeID).then(function(t){e.listEleboxModel22=t.data,console.log("控制柜信息3",t.data)}).catch(function(e){console.log(e)})},manageLamp:function(e){this.eleboxId=e,this.notBe=0,this.lightPageNumber=1,this.lightPageSize=10,this.getListLighting(),this.manageLanmpDialog=!0;var t=this;Object(c.o)(e).then(function(e){t.eleboxList2=e.data,console.log("测试",e.data),console.log("控制柜信息",e.data)}).catch(function(e){console.log(e)})},getListGIS:function(){var e=this;Object(c.r)().then(function(t){e.gisAllList=t.data}).catch(function(e){console.log(e)})},getListLightModel:function(){var e=this;Object(d.c)().then(function(t){e.listLightModel=t.data}).catch(function(e){console.log(e)})},getListArea:function(){var e=this;Object(c.m)().then(function(t){e.listArea=t.data}).catch(function(e){console.log(e)})},getAllProjectList:function(){var e=this;Object(c.w)().then(function(t){t.data&&(e.allProjectList=t.data)})},getListElebox:function(){var e=this,t=this;Object(c.n)(t.boxPageNumber,t.boxPageSize).then(function(l){t.eleboxList=l.data,console.log("控制柜信息",l.data),t.eleboxList.length>0?e.allEleboxTotal=l.total:e.allEleboxTotal=0}).catch(function(e){console.log(e)})},getAllListElebox:function(){var e=this;Object(c.n)().then(function(t){e.allEleboxList=t.data}).catch(function(e){console.log(e)})},deleteEleboxRow:function(e,t){var l=this,i=[];if(1===e)i.push(this.eleboxList[t].id);else{if(!(this.boxMultipleSelection.length>0))return this.$message({message:"请勾选需要删除的数据",type:"warning"}),!1;this.boxMultipleSelection.forEach(function(e){i.push(e.id)})}this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.g)(i).then(function(e){l.$message({type:"success",message:"删除成功!"}),l.getListElebox(),l.getAllListElebox()}).catch(function(e){console.log(e)})}).catch(function(){l.$message({type:"info",message:"已取消删除"})})},onNewElboxSubmit:function(){var e=this;if(this.deviceList.length<1)return this.$message({type:"error",message:"请添加设备"}),!1;Object(c.a)(this.deviceList,this.ElboxCount).then(function(t){e.$message({type:"success",message:"添加成功"}),e.getListElebox(),e.cabinetDialog=!1,e.$refs.elboxCountForm.resetFields(),e.deviceList=[],e.ElboxCount=null}).catch(function(e){console.log(e)})},onEditNewEleboxSubmit:function(){var e=this;this.newElebox.useDate=new Date(this.newElebox.useDate).toString(),this.newElebox.manufacture=new Date(this.newElebox.manufacture).toString(),Object(c.z)(this.newElebox).then(function(t){e.$message({type:"success",message:"编辑成功"}),e.getListElebox(),e.getAllProjectList(),e.editCabinetDialog=!1,e.$refs.editCabinetForm.resetFields(),e.newElebox={}}).catch(function(e){console.log(e)})},onNewEleboxModelSubmit:function(){this.newEleboxModel.modelLoopList=this.modelLoopList;var e=o()({},this.newEleboxModel);if(null!==this.editIndex)this.deviceList.splice(this.editIndex,1,e),this.$message({type:"success",message:"修改成功"}),this.disabled=!1,this.editIndex=null;else{if(this.EleboxModelCount>1)for(var t=0;t<this.EleboxModelCount;t++)this.deviceList.push(e);else this.deviceList.push(e);this.$message({type:"success",message:"添加成功"})}this.deviceAddDialog=!1,this.$refs.addNewEleboxModelForm.resetFields(),this.newEleboxModel={},this.modelLoopList=[],this.EleboxModelCount=null},editModel:function(e){this.editIndex=e,this.newEleboxModel=this.deviceList[e],this.modelLoopList=this.newEleboxModel.modelLoopList||[],this.deviceAddDialog=!0,this.disabled=!0},deleteModel:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deviceList.splice(e,1),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},onNewModelLoopSubmit:function(){var e=o()({},this.newModelLoop);null!==this.editIndex?(this.modelLoopList.splice(this.editIndex,1,e),this.$message({type:"success",message:"修改成功"}),this.editIndex=null):(this.modelLoopList.push(e),this.newEleboxModel.loopCount=this.modelLoopList.length,this.$message({type:"success",message:"添加成功"})),this.addLoopDialog=!1,this.$refs.addNewModelLoopForm.resetFields(),this.newModelLoop={}},editModelLoop:function(e){this.editIndex=e,this.newModelLoop=o()({},this.modelLoopList[e]),this.addLoopDialog=!0},deleteModelLoop:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.modelLoopList.splice(e,1),t.newEleboxModel.loopCount=t.modelLoopList.length,t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getListLighting:function(){var e=this,t=this;t.eleboxId=null,t.notBe=null,Object(c.s)(t.lightPageNumber,t.lightPageSize,t.eleboxId).then(function(l){t.lightingList=l.data,t.lightingList.length>0?e.allLightTotal=l.total:e.allLightTotal=0}).catch(function(e){console.log(e)})},editLightRow:function(e){var t=this;this.addType=1,this.editIndex=e,Object(c.j)(this.lightingList[e].id).then(function(e){t.newLight=e.data[0],t.addLampDialog=!0})},deleteLightRow:function(e,t){var l=this,i=[];if(1===e)i.push(this.lightingList[t].id);else{if(!(this.lightMultipleSelection.length>0))return this.$message({message:"请勾选需要删除的数据",type:"warning"}),!1;this.lightMultipleSelection.forEach(function(e){i.push(e.id)})}this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.i)(i).then(function(e){l.$message({type:"success",message:"删除成功!"}),l.getListLighting()}).catch(function(e){console.log(e)})}).catch(function(){l.$message({type:"info",message:"已取消删除"})})},onNewLightSubmit:function(){var e=this;console.log(this.newLight.useDate),this.newLight.useDate=new Date(this.newLight.useDate).toString(),this.newLight.manufacture=new Date(this.newLight.manufacture).toString(),Object(c.e)(this.newLight).then(function(t){e.editIndex?e.$message({type:"success",message:"编辑成功"}):e.$message({type:"success",message:"添加成功"}),e.getListLighting(),e.addLampDialog=!1,e.$refs.addNewLightForm.resetFields(),e.newLight={},e.editIndex=null}).catch(function(e){console.log(e)})},onNewMoreLightSubmit:function(){var e=this;if(null===this.MoreLampObj.uid)return this.$message({type:"error",message:"请填写Uid"}),!1;if(null===this.MoreLampObj.uidNum)return this.$message({type:"error",message:"请填写数量"}),!1;if(null===this.MoreLampObj.num)return this.$message({type:"error",message:"请每次递增间隔"}),!1;for(var t=parseInt(this.MoreLampObj.uid),l=[],i=0;i<this.MoreLampObj.uidNum;i++){var a=o()({},this.newMoreLight);a.uid=t,a.uid=a.uid.toString(),a.useDate=new Date(a.useDate).toString(),a.manufacture=new Date(a.manufacture).toString(),t+=this.MoreLampObj.num,l.push(a)}console.log(l),Object(c.b)(l).then(function(t){e.editIndex?e.$message({type:"success",message:"编辑成功"}):e.$message({type:"success",message:"添加成功"}),e.getListLighting(),e.addMoreLampDialog=!1,e.$refs.addNewMoreLightForm.resetFields(),e.newMoreLight={}}).catch(function(e){console.log(e)})},setLightBox:function(){var e=this,t=[];if(!(this.lightMultipleSelection.length>0))return this.$message({message:"请勾选需要设置的数据",type:"warning"}),!1;this.lightMultipleSelection.forEach(function(e){t.push(e.id)}),Object(c.A)(t,this.selectEleboxId).then(function(t){e.selectEleboxId="",e.$message({message:"所属控制柜更改成功",type:"success"}),e.lightMultipleSelection=[],e.$refs.lightListTable.clearSelection(),e.setLightBoxDialog=!1,e.getListLighting()}).catch(function(e){console.log(e)})},goRules:function(e){var t=this;this.$refs[e].validate(function(l){l?"addNewLightForm"===e?t.onNewLightSubmit():"addNewModelLoopForm"===e?t.onNewModelLoopSubmit():"addNewEleboxModelForm"===e?t.onNewEleboxModelSubmit():"editCabinetForm"===e?t.onEditNewEleboxSubmit():"addNewMoreLightForm"===e&&t.onNewMoreLightSubmit():console.log("error submit!!")})},handleCloseEditCabinetDialog:function(e){this.$refs.editCabinetForm.resetFields(),this.newElebox={},e()},handleCloseAddNewElbox:function(e){this.$refs.elboxCountForm.resetFields(),this.deviceList=[],this.ElboxCount=null,e()},handleCloseAddNewModelLoop:function(e){this.$refs.addNewModelLoopForm.resetFields(),this.newModelLoop={},e()},handleCloseAddNewLight:function(e){this.$refs.addNewLightForm.resetFields(),this.newLight={},e()},handleCloseAddMoreNewLight:function(e){this.$refs.addNewMoreLightForm.resetFields(),this.newMoreLight={},e()},getListEleboxModel:function(e){var t=this;Object(c.p)(e).then(function(e){t.listEleboxModel=e.data}).catch(function(e){console.log(e)})},selectEleboxModel:function(e){this.selectEleboxModelId=e},getListModelLoop:function(e){var t=this;this.useIdAfterTime=e,Object(c.u)(e).then(function(e){t.listModelLoop=e.data}).catch(function(e){console.log(e)})},selectModelLoop:function(e){this.selectModelLoopId=e},splitAddNewLoop:function(){this.addSplitLoopDialog=!0},subSplitLoop:function(){var e=o()({},this.newModelLoop);this.splitNewLoopList.push(e),this.addSplitLoopDialog=!1,this.$refs.addNewModelLoopForm.resetFields(),this.newModelLoop={}},deleteSplitModelLoop:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.splitNewLoopList.splice(e,1),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},subAllSplitLoop:function(){var e=this;console.log(this.splitNewLoopList),Object(c.x)(this.selectModelLoopId,this.splitNewLoopList).then(function(t){console.log(t),e.splitNewLoopList=[],e.getListModelLoop(e.useIdAfterTime)}).catch(function(e){console.log(e)})},uploadElBoxSuccess:function(){this.$message({type:"success",message:"上传成功"}),this.getListElebox()},uploadElBoxError:function(e){console.log(e)},downloadEleBox:function(){var e=this,t=[];if(!(this.boxMultipleSelection.length>0))return this.$message({message:"请勾选需要导出的数据",type:"warning"}),!1;this.boxMultipleSelection.forEach(function(e){t.push(e.id)});var l={lightIdList:t};l=r.a.stringify(l,{allowDots:!0});s.a.post("http://47.105.38.215:8080/nnlightctl/api/roadlighting/exportElebox",l,{ContentType:"application/x-www-form-urlencoded",responseType:"arraybuffer"}).then(function(t){var l=new Blob([t.data],{type:"application/vnd.ms-excel"}),i=URL.createObjectURL(l);window.location.href=i,e.boxMultipleSelection=[]}).catch(function(e){})},uploadLightSuccess:function(){this.$message({type:"success",message:"上传成功"}),this.getListLighting()},uploadLightError:function(e){console.log(e)},downloadLight:function(){var e=this,t=[];if(!(this.lightMultipleSelection.length>0))return this.$message({message:"请勾选需要导出的数据",type:"warning"}),!1;this.lightMultipleSelection.forEach(function(e){t.push(e.id)});var l={lightIdList:t};l=r.a.stringify(l,{allowDots:!0});s.a.post("http://47.105.38.215:8080/nnlightctl/api/roadlighting/exportLighting",l,{ContentType:"application/x-www-form-urlencoded",responseType:"arraybuffer"}).then(function(t){var l=new Blob([t.data],{type:"application/vnd.ms-excel"}),i=URL.createObjectURL(l);window.location.href=i,e.lightMultipleSelection=[]}).catch(function(e){})},getLoopLight:function(e){var t=this;Object(c.k)(e).then(function(e){t.thisLoopList=e.data})},goLeftLoop:function(){if(console.log("222",this.thisLoopListSelection),this.selectEleboxModelId2&&this.selectModelLoopId3){for(var e=0;e<this.thisLoopListSelection.length;e++){this.nobeIDlist.push(this.thisLoopListSelection[e]);for(var t=0;t<this.thisLoopList1.length;t++)this.thisLoopListSelection[e].id===this.thisLoopList1[t].id&&this.thisLoopList1.splice(t,1)}var l=[];for(e=0;e<this.thisLoopList1.length;e++)l.push(e+1);this.options=l}else this.$message({message:"请选择模块、回路",type:"warning"})},goRightLoop:function(){if(this.selectEleboxModelId2&&this.selectModelLoopId3){console.log("ddd",this.lightMultipleSelection);for(var e=0;e<this.lightMultipleSelection.length;e++)this.thisLoopList1.push(this.lightMultipleSelection[e]);var t=[];for(e=0;e<this.thisLoopList1.length;e++)t.push(e+1);this.options=t;for(e=0;e<this.lightMultipleSelection.length;e++)for(var l=0;l<this.nobeIDlist.length;l++)this.lightMultipleSelection[e].id===this.nobeIDlist[l].id&&this.nobeIDlist.splice(l,1)}else this.$message({message:"请选择模块、回路1",type:"warning"})},updateLightBeEleboxBeLoop:function(){var e=this,t=[];if(this.thisLoopList1.length<1)return this.$message({message:"请勾选数据",type:"warning"}),!1;this.thisLoopList1.forEach(function(e){t.push(e.id)}),console.log("cccccc",t),console.log("cdcdcd",this.originalLightIds),1==this.panduan?this.$message.error("序号重复请查看"):Object(c.B)(this.originalLightIds,t,this.selectEleboxModelId2,this.selectModelLoopId3).then(function(t){e.insertLanmpDialog=!1}).catch(function(e){console.log(e)})},deleteLightOfLoop:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.thisLoopList.splice(e,1),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},unbindLightBeElebox:function(e,t){var l=this,i=[];if(1===e)i.push(this.lightingList[t].id);else{if(!(this.lightMultipleSelection.length>0))return this.$message({message:"请勾选需要删除的数据",type:"warning"}),!1;this.lightMultipleSelection.forEach(function(e){i.push(e.id)})}this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.y)(l.eleboxId,i).then(function(e){l.$message({type:"success",message:"删除成功!"}),l.getListLighting()}).catch(function(e){console.log(e)})}).catch(function(){l.$message({type:"info",message:"已取消删除"})})},changeMokuai:function(e){var t=this;console.log("id",e),Object(c.v)(e).then(function(e){t.listModelLoop2=e.data,t.selectModelLoopId3=e.data[0].loopCode,Object(c.k)(e.data[0].id).then(function(e){t.thisLoopList1=e.data;for(var l=[],i=0;i<t.thisLoopList1.length;i++)console.log("ididid",t.thisLoopList1[i].id),l.push(t.thisLoopList1[i].id);t.originalLightIds=l,console.log("回路",e.data);for(l=new Array,i=0;i<e.data.length;i++)l.push(i+1);console.log("序号",l),t.options=l,console.log(t.options)})})},changeHulu:function(e){var t=this;Object(c.k)(e).then(function(e){t.thisLoopList1=e.data;for(var l=[],i=0;i<e.data.length;i++)l.push(e.data[i].loopPriority);t.idiid=l})},loopdatachange:function(e,t){for(var l=[],i=0;i<this.thisLoopList1.length;i++)l.push(this.thisLoopList1[i].loopPriority);l.splice(t,1),l.indexOf(e.loopPriority)<0?(l.splice(t,1,e.loopPriority),Object(c.l)(e.id,e.loopPriority).then(function(e){}),this.panduan=2):(this.panduan=1,this.$message.error("数据重复"))}},created:function(){this.getListGIS(),this.getListLightModel(),this.getListElebox(),this.getAllListElebox(),this.getListLighting(),this.getListArea(),this.getAllProjectList()}}),h={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"system-container"},[l("el-tabs",{on:{"tab-click":e.tabHandleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[l("el-tab-pane",{attrs:{label:"控制柜警报",name:"cabinet"}},[l("div",{staticClass:"open-alram-btn",attrs:{id:"open-alarm"}},[l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleOpenAlara()}}},[e._v("是否开启报警")])],1),e._v(" "),l("div",{attrs:{id:"ele-warning"}},[l("el-row",{staticStyle:{margin:"20px 0"}},[l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("意外亮灯")]),e._v(" "),l("i",{staticClass:"light-right icon-item"})])]),e._v(" "),l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("意外灭灯")]),e._v(" "),l("i",{staticClass:"icon-item light-wrong",style:{opacity:1}})])]),e._v(" "),l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("线路过流")]),e._v(" "),l("i",{staticClass:"icon-item lines",style:{opacity:1}})])]),e._v(" "),l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("线路过压")]),e._v(" "),l("i",{staticClass:"icon-item xianluguoya",style:{opacity:1}},[e._v("")])])])],1),e._v(" "),l("el-row",{staticStyle:{margin:"20px 0"}},[l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("线路欠压")]),e._v(" "),l("i",{staticClass:"icon-item xianluqianya",style:{opacity:1}})])]),e._v(" "),l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("配电柜断电")]),e._v(" "),l("i",{staticClass:"icon-item peidianguiduandian",style:{opacity:1}})])]),e._v(" "),l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("配电柜缺相")]),e._v(" "),l("i",{staticClass:"icon-item electricity_meter_unconnected",style:{opacity:1}})])]),e._v(" "),l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("配电柜漏电")]),e._v(" "),l("i",{staticClass:"icon-item electricity",style:{opacity:1}})])])],1),e._v(" "),l("el-row",{staticStyle:{margin:"20px 0"}},[l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("功率因数越限")]),e._v(" "),l("i",{staticClass:"icon-item electricity_meter2",style:{opacity:1}})])]),e._v(" "),l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("柜门开启")]),e._v(" "),l("i",{staticClass:"icon-item open_door",style:{opacity:1}})])]),e._v(" "),l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("配电柜倾斜")]),e._v(" "),l("i",{staticClass:"icon-item elexbox_1",style:{opacity:1}})])]),e._v(" "),l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("配电柜进水")]),e._v(" "),l("i",{staticClass:"icon-item Group_4",style:{opacity:1}})])]),e._v(" "),l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("配电柜雷击")]),e._v(" "),l("i",{staticClass:"icon-item elexbox_simple",style:{opacity:1}})])]),e._v(" "),l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("手自控切换")]),e._v(" "),l("i",{staticClass:"icon-item current_sensor",style:{opacity:1}})])]),e._v(" "),l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("外部控制器")]),e._v(" "),l("i",{staticClass:"icon-item main_mada",style:{opacity:1}})])]),e._v(" "),l("el-col",{attrs:{span:6}},[l("div",{staticClass:"light-wrap",on:{click:function(t){e.handleLightOpen()}}},[l("h4",{staticClass:"light-wrap-title"},[e._v("自定义报警")]),e._v(" "),l("i",{staticClass:"icon-item diy_icon",style:{opacity:1}})])])],1)],1)]),e._v(" "),l("el-tab-pane",{attrs:{label:"常规灯具警报",name:"lighting"}},[l("div",{staticClass:"open-alram-btn",style:{paddingLeft:"20px"},attrs:{id:"open-alarm2"}},[l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleOpenAlara()}}},[e._v("是否开启报警")])],1),e._v(" "),l("div",{staticClass:"system-top clearfix"},[l("div",{staticClass:"item-block f-l"},[l("span",{staticClass:"title"},[e._v("灯杆")]),l("el-input",{attrs:{placeholder:"请输入"}})],1),e._v(" "),l("div",{staticClass:"item-block f-l"},[l("span",{staticClass:"title"},[e._v("灯头号")]),l("el-input",{attrs:{placeholder:"请输入"}})],1),e._v(" "),l("div",{staticClass:"btn-block f-r"},[l("el-button",{attrs:{type:"primary"}},[e._v("查询")])],1)]),e._v(" "),l("div",{staticClass:"system-center"},[l("div",{staticClass:"operation-bar"},[l("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){e.addLamp()}}},[e._v("增加")]),e._v(" "),l("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){e.addLampAll()}}},[e._v("批量增加")]),e._v(" "),l("el-upload",{staticClass:"upload-demo",attrs:{"show-file-list":!1,action:"http://47.105.38.215:8080/nnlightctl/api/roadlighting/importLighting","on-success":e.uploadLightSuccess,"on-error":e.uploadLightError,name:"batchImportLightingFile"}},[l("el-button",{attrs:{icon:"el-icon-upload2"}},[e._v("导入")])],1),e._v(" "),l("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.downloadLight}},[e._v("导出")]),e._v(" "),l("el-dropdown",{attrs:{trigger:"click",placement:"bottom-start"},on:{command:e.handleLightEdit}},[l("el-button",{attrs:{icon:"el-icon-edit"}},[e._v("批量设置")]),e._v(" "),l("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[l("el-dropdown-item",{attrs:{command:"1"}},[e._v("设置区域")]),e._v(" "),l("el-dropdown-item",{attrs:{command:"2"}},[e._v("设置所属控制柜")]),e._v(" "),l("el-dropdown-item",{attrs:{command:"3"}},[e._v("设置地图图标")])],1)],1),e._v(" "),l("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(t){e.deleteLightRow(2)}}},[e._v("批量删除")])],1),e._v(" "),l("div",{staticClass:"data-list"},[l("el-table",{ref:"lightListTable",staticStyle:{width:"100%"},attrs:{data:e.lightingList,"tooltip-effect":"dark","header-row-class-name":"datalist-header"},on:{"selection-change":e.handleSelectionChangeLight}},[l("el-table-column",{attrs:{fixed:"",type:"selection",width:"40"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"",prop:"uid",label:"UID",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{label:"使用日期",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("timeFormat")(t.row.gmtCreated))+"\n              ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"lamphead",label:"灯头号",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"lamppost",label:"灯杆",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"decay",label:"光衰",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"maxUseTime",label:"最大使用时间（年）",width:"160"}}),e._v(" "),l("el-table-column",{attrs:{prop:"mem",label:"备注"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(l){l.preventDefault(),e.editLightRow(t.$index)}}},[e._v("\n                  编辑\n                ")]),e._v(" "),l("el-button",{staticClass:"danger-text-btn",attrs:{type:"text",size:"small"},nativeOn:{click:function(l){l.preventDefault(),e.deleteLightRow(1,t.$index)}}},[e._v("\n                  删除\n                ")])]}}])})],1)],1),e._v(" "),l("div",{staticClass:"pagelist-block"},[l("el-pagination",{attrs:{background:"","current-page":e.lightCurrentPage,"page-sizes":[10,20,50,100],"page-size":e.lightPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.allLightTotal},on:{"size-change":e.handleSizeChangeLight,"current-change":e.handleCurrentChangeLight}})],1)])])],1),e._v(" "),l("el-dialog",{staticClass:"opendialog",attrs:{title:"是否开启警报",visible:e.openAlarmVisible},on:{"update:visible":function(t){e.openAlarmVisible=t}}},[l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.openalarmdData,"tooltip-effect":"dark"}},[l("el-table-column",{attrs:{label:"警报类型",prop:"ctype",width:"300"}}),e._v(" "),l("el-table-column",{attrs:{label:"是否开启",prop:"oepn",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-checkbox",{on:{change:function(l){e.handleisUseAlarmChange(t)}},model:{value:t.row.isUse,callback:function(l){e.$set(t.row,"isUse",l)},expression:"scope.row.isUse"}})]}}])})],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.openAlarmVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.handleOpenAlarmOk}},[e._v("确 定")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"意外亮灯",visible:e.lightisUseVisible},on:{"update:visible":function(t){e.lightisUseVisible=t}}},[l("el-row",[l("el-col",{attrs:{span:6}},[l("span",[e._v("警报等级")])]),e._v(" "),l("el-col",{attrs:{span:18}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.alarmLevelOptions,function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:18,offset:6}},[l("el-checkbox",{model:{value:e.alermConfigData.isNoticeMap,callback:function(t){e.$set(e.alermConfigData,"isNoticeMap",t)},expression:"alermConfigData.isNoticeMap"}},[e._v("在地图上显示警报信息")])],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:18,offset:6}},[l("el-checkbox",{model:{value:e.alermConfigData.isNoticeSms,callback:function(t){e.$set(e.alermConfigData,"isNoticeSms",t)},expression:"alermConfigData.isNoticeSms"}},[e._v("发送短信警报信息")])],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:18,offset:6}},[l("el-checkbox",{model:{value:e.alermConfigData.isWechat,callback:function(t){e.$set(e.alermConfigData,"isWechat",t)},expression:"alermConfigData.isWechat"}},[e._v("发送微信警报信息")])],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:18,offset:6}},[l("el-checkbox",{model:{value:e.alermConfigData.isEmail,callback:function(t){e.$set(e.alermConfigData,"isEmail",t)},expression:"alermConfigData.isEmail"}},[e._v("发送邮件警报信息")])],1)],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.lightOpenVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.handleAlarmConfigSave}},[e._v("保 存")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"新增控制柜",width:"590px",visible:e.cabinetDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,center:"","before-close":e.handleCloseAddNewElbox},on:{"update:visible":function(t){e.cabinetDialog=t}}},[l("el-form",{ref:"elboxCountForm",attrs:{"label-width":"100px"}},[l("el-form-item",{attrs:{label:"控制柜数量"}},[l("el-input",{staticStyle:{width:"70px"},model:{value:e.ElboxCount,callback:function(t){e.ElboxCount=t},expression:"ElboxCount"}})],1)],1),e._v(" "),l("div",{staticClass:"cabinet-list"},[l("div",{staticClass:"operate-block clearfix"},[l("a",{staticClass:"f-l",on:{click:function(t){e.addDevice()}}},[l("i",{staticClass:"iconfont "},[e._v("")]),e._v("添加设备")])]),e._v(" "),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.deviceList,"tooltip-effect":"dark","header-row-class-name":"datalist-header"}},[l("el-table-column",{attrs:{fixed:"",prop:"uid",label:"唯一编码",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"modelName",label:"名称",width:"140"}}),e._v(" "),l("el-table-column",{attrs:{prop:"powerRating",label:"额定功率",width:"80"}}),e._v(" "),l("el-table-column",{attrs:{prop:"electricRating",label:"额定电流",width:"80"}}),e._v(" "),l("el-table-column",{attrs:{prop:"voltageRating",label:"额定电压",width:"80"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(l){l.preventDefault(),e.editModel(t.$index)}}},[e._v("\n              编辑\n            ")]),e._v(" "),l("el-button",{staticClass:"danger-text-btn",attrs:{type:"text",size:"small"},nativeOn:{click:function(l){l.preventDefault(),e.deleteModel(t.$index)}}},[e._v("\n              删除\n            ")])]}}])})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.cabinetDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onNewElboxSubmit()}}},[e._v("确 定")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"添加设备",width:"1200px",visible:e.deviceAddDialog,center:""},on:{"update:visible":function(t){e.deviceAddDialog=t}}},[l("el-form",{ref:"form",attrs:{"label-width":"100px"}},[l("el-form-item",{attrs:{label:"设备数量"}},[l("el-input",{staticStyle:{width:"70px"},attrs:{disabled:e.disabled},model:{value:e.EleboxModelCount,callback:function(t){e.EleboxModelCount=t},expression:"EleboxModelCount"}})],1)],1),e._v(" "),l("div",{staticClass:"add-device clearfix"},[l("div",{staticClass:"device-info"},[l("el-form",{ref:"addNewEleboxModelForm",attrs:{"label-width":"150px",model:e.newEleboxModel,rules:e.addNewEleboxModel,size:"small"}},[l("el-form-item",{attrs:{label:"名称",required:"",prop:"modelName"}},[l("el-input",{model:{value:e.newEleboxModel.modelName,callback:function(t){e.$set(e.newEleboxModel,"modelName",t)},expression:"newEleboxModel.modelName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"类型",required:""}},[l("el-input",{attrs:{value:"模块",disabled:""}})],1),e._v(" "),l("el-form-item",{attrs:{label:"唯一编码",required:"",prop:"uid"}},[l("el-input",{model:{value:e.newEleboxModel.uid,callback:function(t){e.$set(e.newEleboxModel,"uid",t)},expression:"newEleboxModel.uid"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"额定功率",required:"",prop:"powerRating"}},[l("el-input",{model:{value:e.newEleboxModel.powerRating,callback:function(t){e.$set(e.newEleboxModel,"powerRating",t)},expression:"newEleboxModel.powerRating"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"额定电流",required:"",prop:"electricRating"}},[l("el-input",{model:{value:e.newEleboxModel.electricRating,callback:function(t){e.$set(e.newEleboxModel,"electricRating",t)},expression:"newEleboxModel.electricRating"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"额定电压",required:"",prop:"voltageRating"}},[l("el-input",{model:{value:e.newEleboxModel.voltageRating,callback:function(t){e.$set(e.newEleboxModel,"voltageRating",t)},expression:"newEleboxModel.voltageRating"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"空气开关选型",required:"",prop:"airSwitchType"}},[l("el-input",{model:{value:e.newEleboxModel.airSwitchType,callback:function(t){e.$set(e.newEleboxModel,"airSwitchType",t)},expression:"newEleboxModel.airSwitchType"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"接触器选型",required:"",prop:"contactorType"}},[l("el-input",{model:{value:e.newEleboxModel.contactorType,callback:function(t){e.$set(e.newEleboxModel,"contactorType",t)},expression:"newEleboxModel.contactorType"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"回路数量",required:"",prop:"loopCount"}},[l("el-input",{model:{value:e.newEleboxModel.loopCount,callback:function(t){e.$set(e.newEleboxModel,"loopCount",t)},expression:"newEleboxModel.loopCount"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"所属相序"}},[l("el-input",{model:{value:e.newEleboxModel.ac,callback:function(t){e.$set(e.newEleboxModel,"ac",t)},expression:"newEleboxModel.ac"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"回路继电器额定电流",required:"",prop:"loopElectricity"}},[l("el-input",{model:{value:e.newEleboxModel.loopElectricity,callback:function(t){e.$set(e.newEleboxModel,"loopElectricity",t)},expression:"newEleboxModel.loopElectricity"}})],1)],1)],1),e._v(" "),l("div",{staticClass:"loop-info"},[l("div",{staticClass:"operate-block clearfix"},[l("a",{staticClass:"f-l",on:{click:function(t){e.addLoop()}}},[l("i",{staticClass:"iconfont "},[e._v("")]),e._v("添加回路")])]),e._v(" "),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.modelLoopList,"tooltip-effect":"dark","header-row-class-name":"datalist-header"}},[l("el-table-column",{attrs:{fixed:"",prop:"loopCode",label:"编号",width:"120"}}),e._v(" "),l("el-table-column",{attrs:{prop:"voltage",label:"电压",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"electricity",label:"电流",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"lightCount",label:"灯具数量",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(l){l.preventDefault(),e.editModelLoop(t.$index)}}},[e._v("\n                  编辑\n                ")]),e._v(" "),l("el-button",{staticClass:"danger-text-btn",attrs:{type:"text",size:"small"},nativeOn:{click:function(l){l.preventDefault(),e.deleteModelLoop(t.$index)}}},[e._v("\n                  删除\n                ")])]}}])})],1)],1)]),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.deviceAddDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.goRules("addNewEleboxModelForm")}}},[e._v("确 定")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"添加回路",width:"560px",visible:e.addLoopDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,center:"","before-close":e.handleCloseAddNewModelLoop},on:{"update:visible":function(t){e.addLoopDialog=t}}},[l("el-form",{ref:"addNewModelLoopForm",attrs:{"label-width":"120px",model:e.newModelLoop,rules:e.addNewModelLoopRules,size:"small"}},[l("el-form-item",{attrs:{label:"回路编号",required:"",prop:"loopCode"}},[l("el-input",{model:{value:e.newModelLoop.loopCode,callback:function(t){e.$set(e.newModelLoop,"loopCode",t)},expression:"newModelLoop.loopCode"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"回路电压",required:"",prop:"voltage"}},[l("el-input",{model:{value:e.newModelLoop.voltage,callback:function(t){e.$set(e.newModelLoop,"voltage",t)},expression:"newModelLoop.voltage"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"回路电流",required:"",prop:"electricity"}},[l("el-input",{model:{value:e.newModelLoop.electricity,callback:function(t){e.$set(e.newModelLoop,"electricity",t)},expression:"newModelLoop.electricity"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"回路灯具数量",required:"",prop:"lightCount"}},[l("el-input",{model:{value:e.newModelLoop.lightCount,callback:function(t){e.$set(e.newModelLoop,"lightCount",t)},expression:"newModelLoop.lightCount"}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.addLoopDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.goRules("addNewModelLoopForm")}}},[e._v("确 定")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"批量增加灯具",width:"630px",visible:e.addMoreLampDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,center:"","before-close":e.handleCloseAddMoreNewLight},on:{"update:visible":function(t){e.addMoreLampDialog=t}}},[l("div",{staticClass:"uid-dgh-item clearfix"},[l("div",{staticClass:"item-block f-l",staticStyle:{width:"220px"}},[l("span",{staticClass:"title"},[e._v("灯具UID")]),l("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入"},model:{value:e.MoreLampObj.uid,callback:function(t){e.$set(e.MoreLampObj,"uid",t)},expression:"MoreLampObj.uid"}})],1),e._v(" "),l("div",{staticClass:"item-block f-l"},[l("span",{staticClass:"title"},[e._v("数量")]),l("el-input",{attrs:{placeholder:"请输入"},model:{value:e.MoreLampObj.uidNum,callback:function(t){e.$set(e.MoreLampObj,"uidNum",t)},expression:"MoreLampObj.uidNum"}})],1),e._v(" "),l("div",{staticClass:"item-block f-l",staticStyle:{width:"160px"}},[l("span",{staticClass:"title"},[e._v("每次递增")]),l("el-input",{attrs:{placeholder:"请输入"},model:{value:e.MoreLampObj.num,callback:function(t){e.$set(e.MoreLampObj,"num",t)},expression:"MoreLampObj.num"}})],1)]),e._v(" "),l("el-form",{ref:"addNewMoreLightForm",staticClass:"lamp-form",attrs:{model:e.newMoreLight,rules:e.addNewLightRules,"label-width":"140px",size:"small"}},[l("el-form-item",{attrs:{label:"生产日期",required:"",prop:"manufacture"}},[l("el-date-picker",{staticClass:"input-wrap",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.newMoreLight.manufacture,callback:function(t){e.$set(e.newMoreLight,"manufacture",t)},expression:"newMoreLight.manufacture "}})],1),e._v(" "),l("el-form-item",{attrs:{label:"安装日期",required:"",prop:"useDate"}},[l("el-date-picker",{staticClass:"input-wrap",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.newMoreLight.useDate,callback:function(t){e.$set(e.newMoreLight,"useDate",t)},expression:"newMoreLight.useDate "}})],1),e._v(" "),l("el-form-item",{attrs:{label:"所属项目",required:"",prop:"nnlightctlProjectId"}},[l("el-select",{staticClass:"input-wrap",model:{value:e.newMoreLight.nnlightctlProjectId,callback:function(t){e.$set(e.newMoreLight,"nnlightctlProjectId",t)},expression:"newMoreLight.nnlightctlProjectId"}},e._l(e.allProjectList,function(e){return l("el-option",{key:e.id,attrs:{label:e.projectName,value:e.id}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"灯杆",required:"",prop:"lamppost"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newMoreLight.lamppost,callback:function(t){e.$set(e.newMoreLight,"lamppost",t)},expression:"newMoreLight.lamppost"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"灯头号",required:"",prop:"lamphead"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newMoreLight.lamphead,callback:function(t){e.$set(e.newMoreLight,"lamphead",t)},expression:"newMoreLight.lamphead"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"灯具型号",required:"",prop:"nnlightctlLightingModelId"}},[l("el-select",{staticClass:"input-wrap",attrs:{placeholder:"请选择"},model:{value:e.newMoreLight.nnlightctlLightingModelId,callback:function(t){e.$set(e.newMoreLight,"nnlightctlLightingModelId",t)},expression:"newMoreLight.nnlightctlLightingModelId"}},e._l(e.listLightModel,function(e){return l("el-option",{key:e.id,attrs:{label:e.mem,value:e.id}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"灯具GIS信息",required:"",prop:"nnlightctlLightingGisId"}},[l("el-select",{staticClass:"input-wrap",attrs:{placeholder:"请选择"},model:{value:e.newMoreLight.nnlightctlLightingGisId,callback:function(t){e.$set(e.newMoreLight,"nnlightctlLightingGisId",t)},expression:"newMoreLight.nnlightctlLightingGisId"}},e._l(e.gisAllList,function(e){return l("el-option",{key:e.id,attrs:{label:e.mem,value:e.id}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"资产编号",required:"",prop:"propertySerialNumber"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newMoreLight.propertySerialNumber,callback:function(t){e.$set(e.newMoreLight,"propertySerialNumber",t)},expression:"newMoreLight.propertySerialNumber"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"光衰",required:"",prop:"decay"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newMoreLight.decay,callback:function(t){e.$set(e.newMoreLight,"decay",t)},expression:"newMoreLight.decay"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"灯具最大使用时间",required:"",prop:"maxUseTime"}},[l("el-input",{staticStyle:{width:"120px"},model:{value:e.newMoreLight.maxUseTime,callback:function(t){e.$set(e.newMoreLight,"maxUseTime",t)},expression:"newMoreLight.maxUseTime"}}),e._v(" "),l("span",[e._v("年")])],1),e._v(" "),l("el-form-item",{attrs:{label:"备注"}},[l("el-input",{staticClass:"input-wrap",attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.newMoreLight.mem,callback:function(t){e.$set(e.newMoreLight,"mem",t)},expression:"newMoreLight.mem"}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.addMoreLampDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.goRules("addNewMoreLightForm")}}},[e._v("确 定")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:e.addTypeText[e.addType]+"灯具",width:"630px",visible:e.addLampDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,center:"","before-close":e.handleCloseAddNewLight},on:{"update:visible":function(t){e.addLampDialog=t}}},[l("el-form",{ref:"addNewLightForm",staticClass:"lamp-form",attrs:{model:e.newLight,rules:e.addNewLightRules,"label-width":"140px",size:"small"}},[l("el-form-item",{attrs:{label:"灯具编码",required:"",prop:"uid"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newLight.uid,callback:function(t){e.$set(e.newLight,"uid",t)},expression:"newLight.uid"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"所属项目",required:"",prop:"nnlightctlProjectId"}},[l("el-select",{staticClass:"input-wrap",model:{value:e.newLight.nnlightctlProjectId,callback:function(t){e.$set(e.newLight,"nnlightctlProjectId",t)},expression:"newLight.nnlightctlProjectId"}},e._l(e.allProjectList,function(e){return l("el-option",{key:e.id,attrs:{label:e.projectName,value:e.id}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"生产日期",required:"",prop:"manufacture"}},[l("el-date-picker",{staticClass:"input-wrap",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.newLight.manufacture,callback:function(t){e.$set(e.newLight,"manufacture",t)},expression:"newLight.manufacture "}})],1),e._v(" "),l("el-form-item",{attrs:{label:"安装日期",required:"",prop:"useDate"}},[l("el-date-picker",{staticClass:"input-wrap",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.newLight.useDate,callback:function(t){e.$set(e.newLight,"useDate",t)},expression:"newLight.useDate "}})],1),e._v(" "),l("el-form-item",{attrs:{label:"灯杆",required:"",prop:"lamppost"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newLight.lamppost,callback:function(t){e.$set(e.newLight,"lamppost",t)},expression:"newLight.lamppost"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"灯头号",required:"",prop:"lamphead"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newLight.lamphead,callback:function(t){e.$set(e.newLight,"lamphead",t)},expression:"newLight.lamphead"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"灯具型号",required:"",prop:"nnlightctlLightingModelId"}},[l("el-select",{staticClass:"input-wrap",attrs:{placeholder:"请选择"},model:{value:e.newLight.nnlightctlLightingModelId,callback:function(t){e.$set(e.newLight,"nnlightctlLightingModelId",t)},expression:"newLight.nnlightctlLightingModelId"}},e._l(e.listLightModel,function(e){return l("el-option",{key:e.id,attrs:{label:e.mem,value:e.id}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"灯具GIS信息",required:"",prop:"nnlightctlLightingGisId"}},[l("el-select",{staticClass:"input-wrap",attrs:{placeholder:"请选择"},model:{value:e.newLight.nnlightctlLightingGisId,callback:function(t){e.$set(e.newLight,"nnlightctlLightingGisId",t)},expression:"newLight.nnlightctlLightingGisId"}},e._l(e.gisAllList,function(e){return l("el-option",{key:e.id,attrs:{label:e.mem,value:e.id}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"资产编号",required:"",prop:"propertySerialNumber"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newLight.propertySerialNumber,callback:function(t){e.$set(e.newLight,"propertySerialNumber",t)},expression:"newLight.propertySerialNumber"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"光衰",required:"",prop:"decay"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newLight.decay,callback:function(t){e.$set(e.newLight,"decay",t)},expression:"newLight.decay"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"灯具最大使用时间",required:"",prop:"maxUseTime"}},[l("el-input",{staticStyle:{width:"120px"},model:{value:e.newLight.maxUseTime,callback:function(t){e.$set(e.newLight,"maxUseTime",t)},expression:"newLight.maxUseTime"}}),e._v(" "),l("span",[e._v("年")])],1),e._v(" "),l("el-form-item",{attrs:{label:"备注"}},[l("el-input",{staticClass:"input-wrap",attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.newLight.mem,callback:function(t){e.$set(e.newLight,"mem",t)},expression:"newLight.mem"}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.addLampDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.goRules("addNewLightForm")}}},[e._v("确 定")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"管理灯具",width:"1200px",visible:e.manageLanmpDialog,center:""},on:{"update:visible":function(t){e.manageLanmpDialog=t}}},[l("div",{staticClass:"manage-lamp"},[l("div",{staticClass:"operation-bar"},[l("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){e.insertLamp()}}},[e._v("批量增加")]),e._v(" "),l("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(t){e.unbindLightBeElebox(2)}}},[e._v("批量删除")])],1),e._v(" "),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.eleboxList2,"tooltip-effect":"dark","header-row-class-name":"datalist-header"},on:{"selection-change":e.handleSelectionChangeLight}},[l("el-table-column",{attrs:{fixed:"",type:"selection",width:"40"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"",prop:"uid",label:"UID",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{label:"使用日期",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("timeFormat")(t.row.gmtCreated))+"\n          ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"lamphead",label:"灯头号",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"lamppost",label:"灯杆",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"decay",label:"光衰",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"maxUseTime",label:"最大使用时间（年）",width:"160"}}),e._v(" "),l("el-table-column",{attrs:{prop:"mem",label:"备注"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(l){l.preventDefault(),e.editLightRow(t.$index)}}},[e._v("\n              编辑\n            ")]),e._v(" "),l("el-button",{staticClass:"danger-text-btn",attrs:{type:"text",size:"small"},nativeOn:{click:function(l){l.preventDefault(),e.unbindLightBeElebox(1,t.$index)}}},[e._v("\n              删除\n            ")])]}}])})],1),e._v(" "),l("div",{staticClass:"pagelist-block"},[l("el-pagination",{attrs:{background:"","current-page":e.lightCurrentPage,"page-sizes":[10,20,50,100],"page-size":e.lightPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.allLightTotal},on:{"size-change":e.handleSizeChangeLight,"current-change":e.handleCurrentChangeLight}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.manageLanmpDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.manageLanmpDialog=!1}}},[e._v("确 定")])],1)]),e._v(" "),l("el-dialog",{attrs:{title:"增加灯具",width:"1200px",visible:e.insertLanmpDialog,center:""},on:{"update:visible":function(t){e.insertLanmpDialog=t}}},[l("div",{staticClass:"insert-lamp clearfix"},[l("div",{staticClass:"select-wrap"},[l("p",{staticClass:"p-title"},[e._v("可选择")]),e._v(" "),l("div",{staticClass:"operate-block clearfix"},[l("a",{staticClass:"f-l",on:{click:function(t){e.addLamp()}}},[l("i",{staticClass:"iconfont "},[e._v("")]),e._v("添加")]),e._v(" "),l("a",{staticClass:"f-l",on:{click:function(t){e.addLampAll()}}},[l("i",{staticClass:"iconfont "},[e._v("")]),e._v("批量添加")]),e._v(" "),l("el-upload",{staticClass:"upload-demo",attrs:{"show-file-list":!1,action:"http://47.105.38.215:8080/nnlightctl/api/roadlighting/importLighting","on-success":e.uploadLightSuccess,"on-error":e.uploadLightError,name:"batchImportLightingFile"}},[l("a",{staticClass:"f-l",attrs:{href:"javascript:;"}},[l("i",{staticClass:"iconfont"},[e._v("")]),e._v("导入")])])],1),e._v(" "),l("el-table",{ref:"lightTableOfLoof",staticStyle:{width:"100%"},attrs:{data:e.nobeIDlist,"tooltip-effect":"dark",height:"300","header-row-class-name":"datalist-header"},on:{"selection-change":e.handleSelectionChangeLight}},[l("el-table-column",{attrs:{type:"selection",width:"30"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"",prop:"uid",label:"UID",width:"60"}}),e._v(" "),l("el-table-column",{attrs:{prop:"lamphead",label:"灯头号",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"lamppost",label:"灯杆",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"decay",label:"光衰",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"mem",label:"备注"}})],1)],1),e._v(" "),l("div",{staticClass:"controll-wrap"},[l("div",{staticClass:"controll-btn",on:{click:e.goLeftLoop}},[l("el-button",{attrs:{size:"small",icon:"el-icon-arrow-left"}})],1),e._v(" "),l("div",{staticClass:"controll-btn",on:{click:e.goRightLoop}},[l("el-button",{attrs:{size:"small",icon:"el-icon-arrow-right"}})],1)]),e._v(" "),l("div",{staticClass:"select-wrap"},[l("p",{staticClass:"p-title"},[e._v("已选择")]),e._v(" "),l("p",{staticClass:"p-title-add"},[e._v("添加到：")]),e._v(" "),l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[l("el-form-item",{attrs:{required:"",label:"模块"}},[l("el-select",{attrs:{placeholder:"模块"},on:{change:function(t){e.changeMokuai(t)}},model:{value:e.selectEleboxModelId2,callback:function(t){e.selectEleboxModelId2=t},expression:"selectEleboxModelId2"}},e._l(e.listEleboxModel22,function(e){return l("el-option",{key:e.id,attrs:{label:e.modelName,value:e.id}})}))],1),e._v(" "),l("el-form-item",{attrs:{required:"",label:"回路"}},[l("el-select",{attrs:{placeholder:"回路"},on:{change:function(t){e.changeHulu(t)}},model:{value:e.selectModelLoopId3,callback:function(t){e.selectModelLoopId3=t},expression:"selectModelLoopId3"}},e._l(e.listModelLoop2,function(e){return l("el-option",{key:e.id,attrs:{label:e.loopCode,value:e.id}})}))],1)],1),e._v(" "),e.thisLoopList1?l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.thisLoopList1,"tooltip-effect":"dark",height:"270","header-row-class-name":"datalist-header"},on:{"selection-change":e.handleSelectionThisLoopList}},[l("el-table-column",{attrs:{type:"selection",width:"30"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"",prop:"uid",label:"UID",width:"60"}}),e._v(" "),l("el-table-column",{attrs:{prop:"lamphead",label:"灯头号",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"lamppost",label:"灯杆",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"decay",label:"光衰",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"mem",label:"备注"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"",label:"序号",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{attrs:{placeholder:"请选择"},on:{change:function(l){e.loopdatachange(t.row,t.$index)}},model:{value:t.row.loopPriority,callback:function(l){e.$set(t.row,"loopPriority",l)},expression:"scope.row.loopPriority"}},e._l(e.options,function(e){return l("el-option",{key:e,attrs:{label:e,value:e}})}))]}}])})],1):e._e()],1)]),e._v(" "),l("div",{}),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.insertLanmpDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateLightBeEleboxBeLoop()}}},[e._v("确 定")])],1)]),e._v(" "),l("el-dialog",{attrs:{title:"编辑控制柜",width:"617px",visible:e.editCabinetDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,center:"","before-close":e.handleCloseEditCabinetDialog},on:{"update:visible":function(t){e.editCabinetDialog=t}}},[l("el-form",{ref:"editCabinetForm",staticClass:"lamp-form",attrs:{model:e.newElebox,rules:e.editNewEleboxRules,"label-width":"140px",size:"small"}},[l("el-form-item",{attrs:{label:"控制柜uid",required:"",prop:"uid"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newElebox.uid,callback:function(t){e.$set(e.newElebox,"uid",t)},expression:"newElebox.uid"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"控制柜唯一编码",required:"",prop:"codeNumber"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newElebox.codeNumber,callback:function(t){e.$set(e.newElebox,"codeNumber",t)},expression:"newElebox.codeNumber"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"配电柜生产日期",required:"",prop:"manufacture"}},[l("el-date-picker",{staticClass:"input-wrap",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.newElebox.manufacture,callback:function(t){e.$set(e.newElebox,"manufacture",t)},expression:"newElebox.manufacture"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"经度",required:"",prop:"longitude"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newElebox.longitude,callback:function(t){e.$set(e.newElebox,"longitude",t)},expression:"newElebox.longitude"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"纬度",required:"",prop:"latitude"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newElebox.latitude,callback:function(t){e.$set(e.newElebox,"latitude",t)},expression:"newElebox.latitude"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"配电柜使用日期",required:"",prop:"useDate"}},[l("el-date-picker",{staticClass:"input-wrap",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.newElebox.useDate,callback:function(t){e.$set(e.newElebox,"useDate",t)},expression:"newElebox.useDate"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"额定电压",required:"",prop:"ratedVoltage"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newElebox.ratedVoltage,callback:function(t){e.$set(e.newElebox,"ratedVoltage",t)},expression:"newElebox.ratedVoltage"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"额定电流",required:"",prop:"ratedElectricty"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newElebox.ratedElectricty,callback:function(t){e.$set(e.newElebox,"ratedElectricty",t)},expression:"newElebox.ratedElectricty"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"额定功率",required:"",prop:"powerRating"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newElebox.powerRating,callback:function(t){e.$set(e.newElebox,"powerRating",t)},expression:"newElebox.powerRating"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"最大使用时间",required:"",prop:"maxUseTime"}},[l("el-input",{staticStyle:{width:"120px"},model:{value:e.newElebox.maxUseTime,callback:function(t){e.$set(e.newElebox,"maxUseTime",t)},expression:"newElebox.maxUseTime"}}),e._v(" "),l("span",[e._v("年")])],1),e._v(" "),l("el-form-item",{attrs:{label:"spd描述",required:"",prop:"spd"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newElebox.spd,callback:function(t){e.$set(e.newElebox,"spd",t)},expression:"newElebox.spd"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"主进线开关型号",required:"",prop:"mainSwitch"}},[l("el-input",{staticClass:"input-wrap",model:{value:e.newElebox.mainSwitch,callback:function(t){e.$set(e.newElebox,"mainSwitch",t)},expression:"newElebox.mainSwitch"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"所属项目",required:"",prop:"nnlightctlProjectId"}},[l("el-select",{staticClass:"input-wrap",model:{value:e.newElebox.nnlightctlProjectId,callback:function(t){e.$set(e.newElebox,"nnlightctlProjectId",t)},expression:"newElebox.nnlightctlProjectId"}},e._l(e.allProjectList,function(e){return l("el-option",{key:e.id,attrs:{label:e.projectName,value:e.id}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"控制柜GIS",required:"",prop:"nnlightctlEleboxGisId"}},[l("el-select",{staticClass:"input-wrap",model:{value:e.newElebox.nnlightctlEleboxGisId,callback:function(t){e.$set(e.newElebox,"nnlightctlEleboxGisId",t)},expression:"newElebox.nnlightctlEleboxGisId"}},e._l(e.gisAllList,function(e){return l("el-option",{key:e.id,attrs:{label:e.mem,value:e.id}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"控制柜区域",required:"",prop:"nnlightctlRegionId"}},[l("el-select",{staticClass:"input-wrap",model:{value:e.newElebox.nnlightctlRegionId,callback:function(t){e.$set(e.newElebox,"nnlightctlRegionId",t)},expression:"newElebox.nnlightctlRegionId"}},e._l(e.listArea,function(e){return l("el-option",{key:e.id,attrs:{label:e.areaName,value:e.id}})}))],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.editCabinetDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.goRules("editCabinetForm")}}},[e._v("确 定")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"提示",visible:e.showAeraDialog,width:"560px",center:""},on:{"update:visible":function(t){e.showAeraDialog=t}}},[l("span",[e._v("请选择所在区域")]),e._v(" "),l("div",{staticClass:"area-dialog-content"},[l("el-input",{attrs:{placeholder:"输入关键字进行搜索"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),l("el-tree",{ref:"tree2",staticClass:"area-tree",attrs:{data:e.data2,props:e.defaultProps,"default-expand-all":"","filter-node-method":e.filterNode}})],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.showAeraDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAeraDialog=!1}}},[e._v("确 定")])],1)]),e._v(" "),l("el-dialog",{attrs:{title:"设置控制柜型号",visible:e.showModelDialog,width:"560px",center:""},on:{"update:visible":function(t){e.showModelDialog=t}}},[l("div",{staticClass:"model-select-dialog"},[l("span",[e._v("控制柜型号")]),e._v(" "),l("el-select",{staticClass:"select-wrap",attrs:{placeholder:"请选择"}})],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.showModelDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showModelDialog=!1}}},[e._v("确 定")])],1)]),e._v(" "),l("el-dialog",{attrs:{title:"设置地图图标",visible:e.showMapDialog,width:"560px",center:""},on:{"update:visible":function(t){e.showMapDialog=t}}},[l("div",{staticClass:"mapicon-dialog"},[l("el-upload",{staticClass:"icon-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card",limit:1}},[l("i",{staticClass:"el-icon-plus"})]),e._v(" "),l("p",[e._v("支持jpg/png/gif格式")])],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.showMapDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showMapDialog=!1}}},[e._v("确 定")])],1)]),e._v(" "),l("el-dialog",{attrs:{title:"设置所属控制柜",visible:e.setLightBoxDialog,width:"560px",center:""},on:{"update:visible":function(t){e.setLightBoxDialog=t}}},[l("div",{staticClass:"model-select-dialog"},[l("span",[e._v("所属控制柜")]),e._v(" "),l("el-select",{staticClass:"select-wrap",attrs:{placeholder:"请选择"},model:{value:e.selectEleboxId,callback:function(t){e.selectEleboxId=t},expression:"selectEleboxId"}},e._l(e.allEleboxList,function(e){return l("el-option",{key:e.id,attrs:{label:e.codeNumber,value:e.id}})}))],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.setLightBoxDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.setLightBox()}}},[e._v("确 定")])],1)]),e._v(" "),l("el-dialog",{attrs:{title:"设置启停",visible:e.showUserableDialog,width:"410px",center:""},on:{"update:visible":function(t){e.showUserableDialog=t}}},[l("div",{staticClass:"useable-select-dialog"},[l("el-radio",{staticClass:"select-item",attrs:{label:"1"},model:{value:e.userable,callback:function(t){e.userable=t},expression:"userable"}},[e._v("启用")]),e._v(" "),l("el-radio",{staticClass:"select-item",attrs:{label:"2"},model:{value:e.userable,callback:function(t){e.userable=t},expression:"userable"}},[e._v("停用")])],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.showUserableDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showUserableDialog=!1}}},[e._v("确 定")])],1)]),e._v(" "),l("el-dialog",{attrs:{title:"回路拆分",visible:e.loopSplitDialog,width:"700px",center:""},on:{"update:visible":function(t){e.loopSplitDialog=t}}},[l("div",{staticClass:"modeloop-split"},[l("p",{staticClass:"title"},[e._v("请选择模块下的回路进行拆分")]),e._v(" "),l("div",{staticClass:"modeloop-split-center clearfix"},[l("div",{staticClass:"split-center-left clearfix"},[l("div",{staticClass:"title clearfix"},[l("div",{staticClass:"item"},[e._v("模块")]),e._v(" "),l("div",{staticClass:"item",staticStyle:{float:"right"}},[e._v("回路")])]),e._v(" "),l("div",{staticClass:"center-left-item"},e._l(e.listEleboxModel,function(t,i){return l("p",{key:i,class:e.selectEleboxModelId==t.id?"activep":"",on:{click:function(l){e.selectEleboxModel(t.id)}}},[e._v(e._s(t.modelName))])})),e._v(" "),l("div",{staticClass:"center-left-item",staticStyle:{float:"right"}},e._l(e.listModelLoop,function(t,i){return l("p",{key:i,class:e.selectModelLoopId==t.id?"activep":"",on:{click:function(l){e.selectModelLoop(t.id)}}},[e._v(e._s(t.loopCode))])}))]),e._v(" "),l("div",{staticClass:"split-center-right"},[l("p",{staticClass:"title clearfix"},[e._v("\n            拆分后的回路\n            "),l("a",{staticClass:"add-loop-split",on:{click:function(t){e.splitAddNewLoop()}}},[l("i",{staticClass:"iconfont "},[e._v("")]),e._v("添加回路")])]),e._v(" "),l("div",{staticClass:"center-right-item"},[l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.splitNewLoopList,"tooltip-effect":"dark","header-row-class-name":"datalist-header"}},[l("el-table-column",{attrs:{fixed:"",prop:"loopCode",label:"编号",width:"120"}}),e._v(" "),l("el-table-column",{attrs:{prop:"voltage",label:"电压",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"electricity",label:"电流",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"lightCount",label:"灯具数量",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"danger-text-btn",attrs:{type:"text",size:"small"},nativeOn:{click:function(l){l.preventDefault(),e.deleteSplitModelLoop(t.$index)}}},[e._v("\n                      删除\n                    ")])]}}])})],1)],1)])])]),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.loopSplitDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.subAllSplitLoop()}}},[e._v("确 定")])],1)]),e._v(" "),l("el-dialog",{attrs:{title:"添加回路",width:"560px",visible:e.addSplitLoopDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,center:"","before-close":e.handleCloseAddNewModelLoop},on:{"update:visible":function(t){e.addSplitLoopDialog=t}}},[l("el-form",{ref:"addNewModelLoopForm",attrs:{"label-width":"120px",model:e.newModelLoop,rules:e.addNewModelLoopRules,size:"small"}},[l("el-form-item",{attrs:{label:"回路编号",required:"",prop:"loopCode"}},[l("el-input",{model:{value:e.newModelLoop.loopCode,callback:function(t){e.$set(e.newModelLoop,"loopCode",t)},expression:"newModelLoop.loopCode"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"回路电压",required:"",prop:"voltage"}},[l("el-input",{model:{value:e.newModelLoop.voltage,callback:function(t){e.$set(e.newModelLoop,"voltage",t)},expression:"newModelLoop.voltage"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"回路电流",required:"",prop:"electricity"}},[l("el-input",{model:{value:e.newModelLoop.electricity,callback:function(t){e.$set(e.newModelLoop,"electricity",t)},expression:"newModelLoop.electricity"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"回路灯具数量",required:"",prop:"lightCount"}},[l("el-input",{model:{value:e.newModelLoop.lightCount,callback:function(t){e.$set(e.newModelLoop,"lightCount",t)},expression:"newModelLoop.lightCount"}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.addSplitLoopDialog=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.subSplitLoop()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var g=l("VU/8")(u,h,!1,function(e){l("K6MT"),l("zeTq")},"data-v-6c889f39",null);t.default=g.exports},zeTq:function(e,t){}});
//# sourceMappingURL=12.fbd1178172311c3aa3fb.js.map