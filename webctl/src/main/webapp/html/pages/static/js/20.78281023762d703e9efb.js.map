{"version":3,"sources":["webpack:///src/views/Ucenter/User/organization.vue","webpack:///./src/views/Ucenter/User/organization.vue?1dea","webpack:///./src/views/Ucenter/User/organization.vue"],"names":["organization","name","data","addTypeText","addType","pageNumber","pageSize","multipleSelection","currentPage","allTotal","newObject","addDialog","listInstitution","listAllInstitution","addNewRules","institutionName","required","message","trigger","methods","handleSelectionChange","val","this","handleCurrentChange","getListInstitution","handleSizeChange","addNewObject","onSubmit","addOrUpdateInstitution","handleCloseDialog","done","$refs","resetFields","_this","institutionLevel","Object","userAdmin","then","response","$message","type","catch","error","console","log","_this2","that","length","total","getAllListInstitution","editRow","e","_this3","id","deleteRow","_this4","_array","push","forEach","selectedItem","$confirm","confirmButtonText","cancelButtonText","created","destroyed","User_organization","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","placeholder","_v","slot","icon","on","click","$event","ref","staticStyle","width","tooltip-effect","header-row-class-name","selection-change","fixed","prop","label","scopedSlots","_u","key","fn","scope","row","_e","_s","_f","gmtCreated","gmtUpdated","size","nativeOn","preventDefault","$index","background","current-page","page-sizes","page-size","layout","size-change","current-change","title","visible","close-on-click-modal","close-on-press-escape","center","before-close","update:visible","label-width","model","rules","value","callback","$$v","$set","expression","_l","item","index","autosize","minRows","maxRows","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/20.78281023762d703e9efb.js","sourcesContent":["<template>\r\n  <div class=\"system-container\">\r\n      <div class=\"system-top clearfix\">\r\n        <el-input placeholder=\"请输入内容\" class=\"input-with-select\">\r\n        </el-input>\r\n        <el-button slot=\"append\" type=\"primary\"  icon=\"el-icon-search\"></el-button>\r\n        <!-- <div class=\"btn-block f-r\">\r\n          <el-button type=\"primary\">查询</el-button>\r\n        </div> -->\r\n      </div>\r\n      <div class=\"system-center\">\r\n        <div class=\"operation-bar\">\r\n          <el-button @click=\"addNewObject()\" type=\"primary\">增加</el-button>\r\n          <el-button @click=\"deleteRow(2)\">删除</el-button>\r\n        </div>\r\n        <div class=\"data-list\">\r\n          <el-table\r\n            ref=\"multipleTable\"\r\n            :data=\"listInstitution\"\r\n            tooltip-effect=\"dark\"\r\n            style=\"width: 100%\"\r\n            header-row-class-name=\"datalist-header\"\r\n            @selection-change=\"handleSelectionChange\">\r\n            <el-table-column\r\n              fixed\r\n              type=\"selection\"\r\n              width=\"40\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"institutionName\"\r\n              fixed=\"left\"\r\n              label=\"机构名称\"\r\n              width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"最高级别机构\"\r\n              width=\"120\">\r\n              <template slot-scope=\"scope\">\r\n                <span v-if=\"scope.row.institutionLevel==0\">是</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"创建时间\"\r\n              width=\"100\">\r\n              <template slot-scope=\"scope\">\r\n                {{scope.row.gmtCreated|timeFormat}}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"修改时间\"\r\n              width=\"100\">\r\n              <template slot-scope=\"scope\">\r\n                {{scope.row.gmtUpdated|timeFormat}}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"addr\"\r\n              label=\"机构地址\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              fixed=\"right\"\r\n              label=\"操作\"\r\n              width=\"120\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  @click.native.prevent=\"editRow(scope.$index)\"\r\n                  type=\"text\"\r\n                  size=\"small\">\r\n                  编辑\r\n                </el-button>\r\n                <el-button\r\n                  class=\"danger-text-btn\"\r\n                  @click.native.prevent=\"deleteRow(1, scope.$index)\"\r\n                  type=\"text\"\r\n                  size=\"small\">\r\n                  删除\r\n                </el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n        <div class=\"pagelist-block\">\r\n          <el-pagination\r\n            @size-change=\"handleSizeChange\"\r\n            background\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"currentPage\"\r\n            :page-sizes=\"[10, 20, 50, 100]\"\r\n            :page-size=\"pageSize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"allTotal\">\r\n          </el-pagination>\r\n        </div>\r\n      </div>\r\n      <!-- 修改 增加机构 -->\r\n      <el-dialog :title=\"addTypeText[addType]+'机构'\"\r\n       :visible.sync=\"addDialog\" :close-on-click-modal='false' :close-on-press-escape='false' center\r\n       :before-close=\"handleCloseDialog\">\r\n        <el-form ref=\"addNewForm\" label-width=\"120px\" :model=\"newObject\" :rules=\"addNewRules\" >\r\n          <el-form-item label=\"机构名称\" prop=\"institutionName\" required>\r\n            <el-input v-model=\"newObject.institutionName\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"父机构\">\r\n            <el-select  v-model=\"newObject.nnlightctlInstitutionIdParent\">\r\n              <el-option\r\n                v-for=\"(item , index) in listAllInstitution\"\r\n                :key=\"index\"\r\n                :label=\"item.institutionName\"\r\n                :value=\"item.id\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"是否是最高级别\" required>\r\n            <el-radio-group v-model=\"newObject.institutionLevel\">\r\n              <el-radio label=\"是\"></el-radio>\r\n              <el-radio label=\"否\"></el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"机构地址\">\r\n            <el-input\r\n              type=\"textarea\"\r\n              :autosize=\"{ minRows: 2, maxRows: 4}\"\r\n              placeholder=\"请输入内容\"\r\n              v-model=\"newObject.addr\">\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"备注\">\r\n            <el-input\r\n              type=\"textarea\"\r\n              :autosize=\"{ minRows: 2, maxRows: 4}\"\r\n              placeholder=\"请输入内容\"\r\n              v-model=\"newObject.mem\">\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"addDialog = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"onSubmit\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {addOrUpdateInstitution, listInstitution, getInstitution, deleteInstitution} from '@/api/RoadLighting/userAdmin'\r\nimport '../../../utils/filter.js'\r\nexport default {\r\n  name: 'organization',\r\n  data () {\r\n    return {\r\n      addTypeText: ['添加', '修改'],\r\n      addType: 0,\r\n      pageNumber: 1,\r\n      pageSize: 10,\r\n      multipleSelection: [],\r\n      currentPage: 1,\r\n      allTotal: null,\r\n      newObject: {},\r\n      addDialog: false,\r\n      listInstitution: [],\r\n      listAllInstitution: [],\r\n      addNewRules: {\r\n        institutionName: [\r\n          { required: true, message: '填写内容不得为空', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleSelectionChange (val) {\r\n      this.multipleSelection = val\r\n    },\r\n    handleCurrentChange (val) {\r\n      this.pageNumber = val\r\n      this.getListInstitution()\r\n      // 翻页请求\r\n    },\r\n    handleSizeChange (val) {\r\n      this.pageSize = val\r\n      this.getListInstitution()\r\n    },\r\n    addNewObject () {\r\n      this.addType = 0\r\n      this.addDialog = true\r\n    },\r\n    onSubmit () {\r\n      this.addOrUpdateInstitution()\r\n    },\r\n    // 弹窗关闭时将数据清空\r\n    handleCloseDialog (done) {\r\n      this.newObject = {}\r\n      this.$refs['addNewForm'].resetFields()\r\n      done()\r\n    },\r\n    addOrUpdateInstitution () {\r\n      if (this.newObject.institutionLevel === '是') {\r\n        this.newObject.institutionLevel = 0\r\n      } else {\r\n        this.newObject.institutionLevel = 1\r\n      }\r\n      addOrUpdateInstitution(this.newObject).then(response => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '修改成功!'\r\n        })\r\n        this.getListInstitution()\r\n        this.addDialog = false\r\n        this.newObject = {}\r\n        this.$refs['addNewForm'].resetFields()\r\n      }).catch(error => {\r\n        console.log(error)\r\n      })\r\n    },\r\n    // 获取列表\r\n    getListInstitution () {\r\n      let that = this\r\n      listInstitution(that.pageNumber, that.pageSize).then(response => {\r\n        that.listInstitution = response.data\r\n        if (that.listInstitution.length > 0) {\r\n          this.allTotal = response.total\r\n        } else {\r\n          this.allTotal = 0\r\n        }\r\n      }).catch(error => {\r\n        console.log(error)\r\n      })\r\n    },\r\n    // 获取不翻页列表\r\n    getAllListInstitution () {\r\n      let that = this\r\n      listInstitution().then(response => {\r\n        that.listAllInstitution = response.data\r\n      }).catch(error => {\r\n        console.log(error)\r\n      })\r\n    },\r\n    // 获取单个机构信息进行修改\r\n    editRow (e) {\r\n      this.addType = 1\r\n      let that = this\r\n      getInstitution(this.listInstitution[e].id).then(response => {\r\n        if (response.data[0].institutionLevel === 0) {\r\n          response.data[0].institutionLevel = '是'\r\n        } else {\r\n          response.data[0].institutionLevel = '否'\r\n        }\r\n        that.newObject = response.data[0]\r\n        this.addDialog = true\r\n      }).catch(error => {\r\n        console.log(error)\r\n      })\r\n    },\r\n    // 删除\r\n    deleteRow (type, e) {\r\n      let _array = []\r\n      if (type === 1) {\r\n        _array.push(this.listInstitution[e].id)\r\n      } else {\r\n        if (this.multipleSelection.length > 0) {\r\n          this.multipleSelection.forEach(selectedItem => {\r\n            // 取出所有待删除选项id\r\n            _array.push(selectedItem.id)\r\n          })\r\n        } else {\r\n          this.$message({\r\n            message: '请勾选需要删除的数据',\r\n            type: 'warning'\r\n          })\r\n          return false\r\n        }\r\n      }\r\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deleteInstitution(_array).then(response => {\r\n          // that.projectList.splice(e, 1)\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          })\r\n          this.getListInstitution()\r\n        }).catch(error => {\r\n          console.log(error)\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        })\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.getListInstitution()\r\n    this.getAllListInstitution()\r\n  },\r\n  destroyed () {\r\n  }\r\n}\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\">\r\n/* reset element-ui css */\r\n</style>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\r\n  .input-with-select{\r\n    width: 285px;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/Ucenter/User/organization.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"system-container\"},[_c('div',{staticClass:\"system-top clearfix\"},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入内容\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"slot\":\"append\",\"type\":\"primary\",\"icon\":\"el-icon-search\"},slot:\"append\"})],1),_vm._v(\" \"),_c('div',{staticClass:\"system-center\"},[_c('div',{staticClass:\"operation-bar\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addNewObject()}}},[_vm._v(\"增加\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){_vm.deleteRow(2)}}},[_vm._v(\"删除\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"data-list\"},[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.listInstitution,\"tooltip-effect\":\"dark\",\"header-row-class-name\":\"datalist-header\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"fixed\":\"\",\"type\":\"selection\",\"width\":\"40\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"institutionName\",\"fixed\":\"left\",\"label\":\"机构名称\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"最高级别机构\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.institutionLevel==0)?_c('span',[_vm._v(\"是\")]):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"创建时间\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n              \"+_vm._s(_vm._f(\"timeFormat\")(scope.row.gmtCreated))+\"\\n            \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"修改时间\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n              \"+_vm._s(_vm._f(\"timeFormat\")(scope.row.gmtUpdated))+\"\\n            \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"addr\",\"label\":\"机构地址\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.editRow(scope.$index)}}},[_vm._v(\"\\n                编辑\\n              \")]),_vm._v(\" \"),_c('el-button',{staticClass:\"danger-text-btn\",attrs:{\"type\":\"text\",\"size\":\"small\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.deleteRow(1, scope.$index)}}},[_vm._v(\"\\n                删除\\n              \")])]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"pagelist-block\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.currentPage,\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.allTotal},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.addTypeText[_vm.addType]+'机构',\"visible\":_vm.addDialog,\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"center\":\"\",\"before-close\":_vm.handleCloseDialog},on:{\"update:visible\":function($event){_vm.addDialog=$event}}},[_c('el-form',{ref:\"addNewForm\",attrs:{\"label-width\":\"120px\",\"model\":_vm.newObject,\"rules\":_vm.addNewRules}},[_c('el-form-item',{attrs:{\"label\":\"机构名称\",\"prop\":\"institutionName\",\"required\":\"\"}},[_c('el-input',{model:{value:(_vm.newObject.institutionName),callback:function ($$v) {_vm.$set(_vm.newObject, \"institutionName\", $$v)},expression:\"newObject.institutionName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"父机构\"}},[_c('el-select',{model:{value:(_vm.newObject.nnlightctlInstitutionIdParent),callback:function ($$v) {_vm.$set(_vm.newObject, \"nnlightctlInstitutionIdParent\", $$v)},expression:\"newObject.nnlightctlInstitutionIdParent\"}},_vm._l((_vm.listAllInstitution),function(item ,index){return _c('el-option',{key:index,attrs:{\"label\":item.institutionName,\"value\":item.id}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"是否是最高级别\",\"required\":\"\"}},[_c('el-radio-group',{model:{value:(_vm.newObject.institutionLevel),callback:function ($$v) {_vm.$set(_vm.newObject, \"institutionLevel\", $$v)},expression:\"newObject.institutionLevel\"}},[_c('el-radio',{attrs:{\"label\":\"是\"}}),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"否\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"机构地址\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 2, maxRows: 4},\"placeholder\":\"请输入内容\"},model:{value:(_vm.newObject.addr),callback:function ($$v) {_vm.$set(_vm.newObject, \"addr\", $$v)},expression:\"newObject.addr\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"备注\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 2, maxRows: 4},\"placeholder\":\"请输入内容\"},model:{value:(_vm.newObject.mem),callback:function ($$v) {_vm.$set(_vm.newObject, \"mem\", $$v)},expression:\"newObject.mem\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialog = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2ad2da22\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Ucenter/User/organization.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2ad2da22\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./organization.vue\")\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2ad2da22\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./organization.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./organization.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./organization.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2ad2da22\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./organization.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2ad2da22\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Ucenter/User/organization.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}